ุงูู ุตูุญู ุฑุง ุจู ุฒุจุงูโูุง ุฏฺฏุฑ ุจุฎูุงูุฏ: [English](/sorting/heap-sort/README.md)

# ๐ค ุงูฺฏูุฑุชู ูุฑุชุจโุณุงุฒ ูุฑู (Heap Sort)

ฺฉ ุงูฺฏูุฑุชู ูุฑุชุจโุณุงุฒ ูุจุชู ุจุฑ ููุงุณู ฺฉู ุงุฒ ุณุงุฎุชุงุฑ ุฏุงุฏูู **ุฏุฑุฎุช ุฏูุฏู ูุฑู** (binary heap) ุจุฑุง ุงูุชู ู ุงุณุชุฎุฑุงุฌ ฺฉุงุฑุขูุฏ ุจุดุชุฑู ุนูุตุฑ ุงุณุชูุงุฏู ูโฺฉูุฏ.

ูุฑุชุจโุณุงุฒ ูุฑู ุจู ุงู ุชุฑุชุจ ฺฉุงุฑ ูโฺฉูุฏ:

1โซ๏ธ ุณุงุฎุช ฺฉ **ูุฑู ุจุดูู** (max-heap) ุงุฒ ุขุฑุงู ูุฑูุฏ

2โซ๏ธ ุงุณุชุฎุฑุงุฌ ูฺฉุฑุฑ ุจุดุชุฑู ุนูุตุฑ (ุฑุดู) ู ูุฑุงุฑ ุฏุงุฏู ุขู ุฏุฑ ุงูุชูุง ุขุฑุงู

3โซ๏ธ ฺฉุงูุด ุงูุฏุงุฒู ูุฑู ู ุจุงุฒุณุงุฒ ุฏูุจุงุฑู ูุฑู

ุงู ุงูฺฏูุฑุชู **ุฏุฑุฌุง ุงูุฌุงู ูโุดูุฏ**ุ **ูุงุจู ูพุดโุจู ุงุณุช** ู ุฒูุงู ููุงุณุจ ุงุณุช ฺฉู ุนููฺฉุฑุฏ ุฏุฑ ุจุฏุชุฑู ุญุงูุช ููู ุจุงุดุฏ.

## ๐ ูพฺุฏฺฏ ุฒูุงู

| ุญุงูุช       | ุฒูุงู         |
|-----------|--------------|
| ุจูุชุฑู    | O(n log n)   |
| ูุชูุณุท     | O(n log n)   |
| ุจุฏุชุฑู   | O(n log n)   |

> โ ุจุฑุฎูุงู ูุฑุชุจโุณุงุฒ ุณุฑุนุ ูุฑุชุจโุณุงุฒ ูุฑู **ููุดู** ุฏุฑ ุฒูุงู O(n log n) ุงุฌุฑุง ูโุดูุฏ โ ุจุฏูู ุดูฺฉ ุฏุฑ ุจุฏุชุฑู ุญุงูุช.

## ๐พ ูพฺุฏฺฏ ูุถุง
โป๏ธ **O(1)** โ ูุฑุชุจโุณุงุฒ ุฏุฑุฌุง ุงูุฌุงู ูโุดูุฏ (ุชููุง ุงุฒ ุญุงูุธู ุงุถุงู ุซุงุจุช ุงุณุชูุงุฏู ูโฺฉูุฏ)

## โ ฺู ุฒูุงู ุงุฒ ุขู ุงุณุชูุงุฏู ฺฉููุ
โป๏ธ ุฒูุงู ฺฉู **ุนููฺฉุฑุฏ ุฏุฑ ุจุฏุชุฑู ุญุงูุช** ุจุงุฏ ุชุถูู ุดูุฏ

โป๏ธ ุฏุฑ ุณุณุชูโูุง ุจูุงุฏุฑูฺฏ ุง ุชุนุจูโุดุฏู (real-time ุง embedded)

โป๏ธ ุฒูุงู ฺฉู ุจู ฺฉ ูุฑุชุจโุณุงุฒ ุฏุฑุฌุง ุจุง ุฒูุงู O(n log n) ูุงุฒ ุฏุงุฑุฏ

โป๏ธ ุจู ุนููุงู ูพุดุชุจุงู ุจุฑุง ูุฑุชุจโุณุงุฒ ุณุฑุน (ูุซูุงู ุฏุฑ ุงูฺฏูุฑุชู Introsort)

## ๐ ูุญูู ฺฉุงุฑฺฉุฑุฏ

### ๐งฉ ุดุจูโฺฉุฏ

```text
BEGIN HeapSort(array)
    n โ length(array)

    // ุณุงุฎุช ูุฑู ุจุดูู ุงุฒ ุขุฑุงู
    FOR i โ n/2 - 1 DOWNTO 0
        Heapify(array, n, i)
    END FOR

    // ุงุณุชุฎุฑุงุฌ ุนูุงุตุฑ ฺฉ ฺฉ ุงุฒ ูุฑู
    FOR i โ n - 1 DOWNTO 1
        SWAP array[0], array[i]  // ุฑุดู ุฑุง ุจู ุงูุชูุง ููุชูู ฺฉู
        Heapify(array, i, 0)     // ูุฑู ุฑุง ุฑู ุงูุฏุงุฒู ฺฉุงูุดโุงูุชู ุจุงุฒุณุงุฒ ฺฉู
    END FOR
END

BEGIN Heapify(array, heapSize, rootIndex)
    largest โ rootIndex
    left โ 2 * rootIndex + 1
    right โ 2 * rootIndex + 2

    IF left < heapSize AND array[left] > array[largest] THEN
        largest โ left
    END IF

    IF right < heapSize AND array[right] > array[largest] THEN
        largest โ right
    END IF

    IF largest โ rootIndex THEN
        SWAP array[rootIndex], array[largest]
        Heapify(array, heapSize, largest)
    END IF
END
```

> ๐ก ุชุงุจุน `Heapify` ุชุถูู ูโฺฉูุฏ ฺฉู ุฒุฑุฏุฑุฎุช ุฑุดูโุฏุงุฑ ุฏุฑ `rootIndex` ุฎุงุตุช ูุฑู ุจุดูู ุฑุง ุฏุงุดุชู ุจุงุดุฏ. 


## ๐ ูุซุงู ฺฏุงู ุจู ฺฏุงู

ุขุฑุงู ุฒุฑ ุฑุง ูุฑุชุจ ูโฺฉูู: `โญ[12, 11, 13, 5, 6, 7]โฌ`

ุงุฒ ุงูุฏฺฉุณโฺฏุฐุงุฑ ูุจุชู ุจุฑ ุตูุฑ ุงุณุชูุงุฏู ูโฺฉูู.

ุฏุฑ ฺฉ ูุฑู ุฏูุฏู:

โป๏ธ ูุงูุฏ ฺฏุฑู `i` = `(i - 1) / 2`

โป๏ธ ูุฑุฒูุฏ ฺูพ ฺฏุฑู `i` = `2 * i + 1`

โป๏ธ ูุฑุฒูุฏ ุฑุงุณุช ฺฏุฑู `i` = `2 * i + 2`

### ๐ ูุฑุญูู ฑ: ุณุงุฎุช ูุฑู ุจุดูู
ุงุฒ ุขุฎุฑู ฺฏุฑู ุจุฑฺฏโููุง (non-leaf) ุดุฑูุน ฺฉุฑุฏู ู ุจู ุณูุช ุนูุจ (`heapify`) ุงุนูุงู ูโฺฉูู.


โป๏ธ ุงูุฏุงุฒู ุขุฑุงู = ถ โ ุขุฎุฑู ุงูุฏฺฉุณ = ต

โป๏ธ ุขุฎุฑู ฺฏุฑู ุจุฑฺฏโููุง = `floor(6/2) - 1` = `2`

ุจูุงุจุฑุงู `heapify` ุฑุง ุงุฒ ุงูุฏฺฉุณ `2` ุดุฑูุน ูโฺฉููุ ุณูพุณ `1` ู ุณูพุณ `0`.

๐น `i = 2` (ููุฏุงุฑ = ฑณ)
```text
ุงูุฏฺฉุณ: 
        โญ0   1   2   3   4   5โฌ
ุขุฑุงู:
        โญ[12, 11, 13, 5, 6, 7]โฌ
                      โ
           ุขุง ฺฏุฑู ฒ ูุฑุฒูุฏ ุฏุงุฑุฏุ ุจุฑุฑุณ ูโฺฉูู:
           ฺูพ  = 2*2+1 = 5 โ arr[5]=7
           ุฑุงุณุช = 2*2+2 = 6 โ ุฎุงุฑุฌ ุงุฒ ูุญุฏูุฏู

ููุงุณู: 13 > 7 โ ุงุฒ ูุจู ุจุดูู ุงุณุช โ ุฌุงุจูโุฌุง ูุฏุงุฑู
```
โ ุชุบุฑ ูุณุช.

๐น `i = 1` (ููุฏุงุฑ = ฑฑ)
```text
ุขุฑุงู: 
        โญ[12, 11, 13, 5, 6, 7]โฌ
                      โ
ฺูพ  = 2*1+1 = 3 โ arr[3] = 5  
ุฑุงุณุช = 2*1+2 = 4 โ arr[4] = 6

ุจุดูู ุจู 11, 5, 6 โ 11 โ ุฌุงุจูโุฌุง ูุฏุงุฑู
```
โ ุชุบุฑ ูุณุช.

๐น `i = 0` (ููุฏุงุฑ = ฑฒ)
```text
ุขุฑุงู:
        โญ[12, 11, 13, 5, 6, 7]โฌ
                           โ
ฺูพ  = 1 โ 11  
ุฑุงุณุช = 2 โ 13

13 > 12 โ ุฌุงุจูโุฌุง 12 ู 13

ุขุฑุงู ุฌุฏุฏ: 
        โญ[13, 11, 12, 5, 6, 7]โฌ
```
ุงฺฉููู ุจุฑุฑุณ ูโฺฉูู ุขุง ุฒุฑุฏุฑุฎุช ุจุง ุฑุดู ุงูุฏฺฉุณ ฒ (ููุฏุงุฑ ฑฒ) ููฺูุงู ูุฑู ุงุณุช:

โป๏ธ ูุฑุฒูุฏ ฺูพ = ต โ ุงูุฏฺฉุณ ต โ ููุฏุงุฑ ท

โป๏ธ ฑฒ > ท โ ุฏุฑุณุช ุงุณุช

โ ูุฑู ุจุดูู ุณุงุฎุชู ุดุฏ!
```ascii
       13
      /  \
    11    12
   / \   /
  5   6 7
```

### ๐ ูุฑุญูู ฒ: ุงุณุชุฎุฑุงุฌ ูุงฺฉุณูู ู ุจุงุฒุณุงุฒ ูุฑู (ฺฉ ฺฉ)
ุญุงู ฺฉู ฺฉ ูุฑู ุจุดูู ุฏุงุฑูุ ุจู ุทูุฑ ูฺฉุฑุฑ:

1โซ๏ธ **ุฌุงุจูโุฌุง** ุฑุดู (ุจุดุชุฑู ุนูุตุฑ) ุจุง **ุขุฎุฑู ุนูุตุฑ ูุฑู**

2โซ๏ธ **ฺฉุงูุด** ุงูุฏุงุฒู ูุฑู ุจู ุงูุฏุงุฒู ฑ (ุขุฎุฑู ุนูุตุฑ ุญุงูุง ุฏุฑ ุฌุง ููุง ุฎูุฏ ุงุณุช)

3โซ๏ธ **ุจุงุฒุณุงุฒ** ุฎุงุตุช ูุฑู ุจุง ูุฑุงุฎูุงู `heapify(0)`

ุจุฎุด **ูุฑุชุจโุดุฏู** ุงุฒ ุฑุงุณุช ุจู ฺูพ ุฑุดุฏ ูโฺฉูุฏุ ุฏุฑ ุญุงู ฺฉู **ูุฑู** ุงุฒ ฺูพ ฺฉูฺฺฉ ูโุดูุฏ.

ุจุงุฏ ูุฑ ูุฑุญูู ุฑุง ุฏูู ุจุฑุฑุณ ฺฉูู.

#### โโโฌ๏ธ ูุฑุญูู ฑ: ุงุณุชุฎุฑุงุฌ ฑณ (ุจุดูู)
```text
ูุฑู ุงููู:
        โญ[13, 11, 12, 5, 6, 7]โฌ

ุฌุงุจูโุฌุง ุฑุดู (0) ุจุง ุขุฎุฑู ุนูุตุฑ (5): โ โญ[7, 11, 12, 5, 6, 13]โฌ

heapify(0): ุฑุดู=7ุ ฺูพ=11ุ ุฑุงุณุช=12 โ ุจุดูู=12 โ ุฌุงุจูโุฌุง โ โญ[12, 11, 7, 5, 6, 13]โฌ
```
```
      12
     /  \
    11   7
   / \
  5   6
```
ูุฑุชุจโุดุฏู: `โญ[ ..., 13]โฌ`

#### โโโฌ๏ธ ูุฑุญูู ฒ: ุงุณุชุฎุฑุงุฌ ฑฒ (ุจุดูู ุฌุฏุฏ)
```text
ูุนู:
        โญ[12, 11, 7, 5, 6, 13]โฌ

ุฌุงุจูโุฌุง ุฑุดู (0) ุจุง ุขุฎุฑู ุนูุตุฑ (4): โ โญ[6, 11, 7, 5, 12, 13]โฌ

heapify(0): ุฑุดู=6ุ ฺูพ=11ุ ุฑุงุณุช=7 โ ุจุดูู=11 โ ุฌุงุจูโุฌุง
โ โญ[11, 6, 7, 5, 12, 13]โฌ
```
```
      11
     /  \
    6    7
   /
  5
```
ูุฑุชุจโุดุฏู: `โญ[ ..., 12, 13]โฌ`

#### โโโฌ๏ธ ูุฑุญูู ณ: ุงุณุชุฎุฑุงุฌ ฑฑ
```text
ูุนู:
          โญ[11, 6, 7, 5, 12, 13]โฌ

ุฌุงุจูโุฌุง ุฑุดู (0) ุจุง ุขุฎุฑู ุนูุตุฑ (3): โ โญ[5, 6, 7, 11, 12, 13]โฌ

heapify(0): ุฑุดู=5ุ ฺูพ=6ุ ุฑุงุณุช=7 โ ุจุดูู=7 โ ุฌุงุจูโุฌุง
โ โญ[7, 6, 5, 11, 12, 13]โฌ
```
```ascii
     7
    / \
   6   5
```
ูุฑุชุจโุดุฏู: `โญ[ ..., 11, 12, 13]โฌ`

#### โโโฌ๏ธ ูุฑุญูู ด: ุงุณุชุฎุฑุงุฌ ท
```text
ูุนู: 
        โญ[7, 6, 5, 11, 12, 13]โฌ

ุฌุงุจูโุฌุง ุฑุดู (0) ุจุง ุขุฎุฑู ุนูุตุฑ (2): โ โญ[5, 6, 7, 11, 12, 13]โฌ

heapify(0): ุฑุดู=5ุ ฺูพ=6 โ 6 > 5 โ ุฌุงุจูโุฌุง
โ โญ[6, 5, 7, 11, 12, 13]โฌ
```
```
   6
  /
 5
```
ูุฑุชุจโุดุฏู: `โญ[ ..., 7, 11, 12, 13]โฌ`

#### โโโฌ๏ธ ูุฑุญูู ต: ุงุณุชุฎุฑุงุฌ ถ
```text
ูุนู:
        โญ[6, 5, 7, 11, 12, 13]โฌ

ุฌุงุจูโุฌุง ุฑุดู (0) ุจุง ุขุฎุฑู ุนูุตุฑ (1): โ โญ[5, 6, 7, 11, 12, 13]โฌ

ุงูุฏุงุฒู ูุฑู = 1 โ ุชูุงู ุดุฏ!
```

**๐ง ุจูุด ฺฉูุฏ**

โป๏ธ ูุฑุชุจโุณุงุฒ ูุฑู ุงุฒ ุญุงูุธู ุงุถุงู ุงุณุชูุงุฏู ููโฺฉูุฏ โ ุงุฒ ุงูุชูุง ุขุฑุงู ุจุฑุง ุฐุฎุฑู ุนูุงุตุฑ ูุฑุชุจโุดุฏู ุงุณุชูุงุฏู ูโฺฉูุฏ.

โป๏ธ ูุฑ ูุฑุงุฎูุงู `heapify` ูพุณ ุงุฒ ุงุณุชุฎุฑุงุฌุ ุฎุงุตุช ูุฑู ุฑุง ุจุงุฒุณุงุฒ ูโฺฉูุฏ.

โป๏ธ ุจุฎุด ูุฑุชุจโุดุฏู ุงุฒ **ุฑุงุณุช ุจู ฺูพ** ุฑุดุฏ ูโฺฉูุฏ.

> ๐ ูุฑุชุจโุณุงุฒ ูุฑู ฺฉ ุขุฑุงู ุฑุง ุจุง ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุขู ุจู ุนููุงู ฺฉ ุฏุฑุฎุช ุฏูุฏู ู ุงุณุชุฎุฑุงุฌ ูฺฉุฑุฑ ุจุดุชุฑู ุนูุตุฑุ ุจู ฺฉ ูุณุช ูุฑุชุจ ุชุจุฏู ูโฺฉูุฏ โ ููู ุฏุฑุฌุง ู ุฏุฑ ุฒูุงู ุชุถููโุดุฏู O(n log n).

โ ุขุฑุงู ููุง: `โญ[5, 6, 7, 11, 12, 13]โฌ`

## ๐ป ูุฑุงุญู ุจุนุฏ
ุฒุจุงู ููุฑุฏ ูุธุฑ ุฎูุฏ ุฑุง ุจุฑุง ูุดุงูุฏู ูพุงุฏูโุณุงุฒ ุงูุชุฎุงุจ ฺฉูุฏ:

[Python](/sorting/heap-sort/python/heap_sort.py) | [Java](/sorting/heap-sort/java/HeapSort.java) | [JavaScript](/sorting/heap-sort/javascript/heap-sort.js) | [C++](/sorting/heap-sort/c++/heap_sort.cpp) | [C#](/sorting/heap-sort/csharp/HeapSort.cs)
